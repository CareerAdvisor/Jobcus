{% extends "base.html" %}

{% block title %}Resume Builder – Jobcus{% endblock %}

{% block content %}

<!-- Hero Section -->
<div class="interview-container" style="padding:30px 10px; background:#104879; text-align:center;">
  <h5 style="color:#ffc957; font-weight:600; letter-spacing:1px;">AI RESUME BUILDER</h5>
  <h1 style="color:white; font-size:28px; font-weight:700; margin:10px 0;">
    Get Hired 2x Faster<br>with an <span style="color:#ffc957;">Optimized Resume</span>
  </h1>
  <p style="color:white; max-width:420px; margin:10px auto 20px;">
    Improve your resume with AI suggestions<br>and a recruiter-friendly format.
  </p>
  <a href="#resume-analyzer" class="primary-btn" 
     style="background:#ffc957; color:#104879; padding:12px 24px; border-radius:6px; font-weight:600; text-decoration:none;">
    ANALYZE MY RESUME
  </a>
  <div style="margin:20px 0;">
    <img src="{{ url_for('static', filename='images/mobile-illustration.png') }}" 
         alt="Upload Resume" style="max-width:180px; height:auto;" />
  </div>
</div>

<!-- Resume Analyzer Section -->
<section id="resume-analyzer" style="padding:40px 20px; background:#f9fafb; font-family:'Segoe UI',sans-serif;">
  <h2 style="color:#104879; font-size:24px; margin-bottom:10px;">🔍 AI Resume Analyzer</h2>
  <p style="color:#555; margin-bottom:20px;">
    Paste or upload your resume to get a personalised score, keyword analysis, and improvement suggestions.
  </p>

  <textarea id="resume-text" placeholder="Paste your resume text here…" 
    style="width:100%; height:150px; padding:12px; border:1px solid #ccc; border-radius:8px; margin-bottom:10px; font-size:14px;"></textarea>

  <input type="file" id="resumeFile" accept=".pdf,.txt,.docx" 
    style="display:block; margin-bottom:15px;">

  <button id="analyze-btn" class="primary-btn"
    style="background:#104879; color:white; padding:12px 24px; border:none; border-radius:6px; font-weight:600; font-size:14px;">
    Analyze Resume
  </button>

  <div id="analyzingIndicator" style="display:none; margin-top:1rem; color:#555;">
    🤖 Analyzing your resume, please wait…
  </div>
</section>

<!-- AI Resume Builder Section -->
<section id="resume-builder" style="background:#ffc957; padding:20px; border-radius:8px; margin-top:2rem;">
  <h2 style="color:#104879;">📄 Build Your Resume with AI</h2>
  <p style="color:#333; margin-bottom:20px;">
    Quickly generate a professional resume with the power of AI. Fill in your details and let us handle the formatting.
  </p>

  <form id="resumeForm" style="display:grid; gap:10px;">
    <label>Full Name</label>
    <textarea name="fullName" required style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>Job Title(s)</label>
    <textarea name="title" required style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>Contact Info</label>
    <textarea name="contact" required style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>Professional Summary</label>
    <textarea name="summary" style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>Education</label>
    <textarea name="education" style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>Work Experience</label>
    <textarea name="experience" style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>Skills</label>
    <textarea name="skills" style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>Certifications</label>
    <textarea name="certifications" style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <label>LinkedIn or Portfolio</label>
    <textarea name="portfolio" style="padding:8px; border:1px solid #ccc; border-radius:4px;"></textarea>

    <button type="submit" style="background:#104879; color:white; padding:10px 20px; border:none; border-radius:5px; font-weight:600;">
      ✨ Generate Resume
    </button>
  </form>

  <!-- White results container with embedded “Generating…” indicator -->
  <div id="builderResumeOutput"
       class="resume-container"
       style="background:white; padding:20px; border-radius:6px; margin-top:30px;">
    <div id="builderGeneratingIndicator" style="display:none; color:#555; margin-bottom:1rem;">
      🤖 Generating your resume, please wait…
    </div>
    <!-- AI-generated HTML will be injected here -->
  </div>

  <!-- Download / Sign-up CTA -->
  <div id="resumeDownloadOptions" style="display:none; margin-top:1rem; text-align:center;">
    {% if current_user.is_authenticated %}
      <button onclick="downloadResume('pdf')">⬇️ Download PDF</button>
      <button onclick="downloadResume('txt')">⬇️ Download TXT</button>
    {% else %}
      <p style="margin-bottom:1rem;">
        Want to download your AI-generated resume?
        <strong><a href="/account" style="color:#104879; text-decoration:none;">Sign up or log in</a></strong> first.
      </p>
    {% endif %}
  </div>
</section>

{% endblock %}

{% block scripts %}
  <!-- DOCX + FileSaver + jsPDF libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/8.0.1/docx.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="{{ url_for('static', filename='resume-builder.js') }}"></script>
{% endblock %}
