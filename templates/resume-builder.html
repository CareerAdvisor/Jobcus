{% extends "base.html" %}

{% block title %}Resume Builder ‚Äì Jobcus{% endblock %}

{% block content %}

<!-- Hero Section -->
<div class="interview-container" style="padding:30px 10px; background:#104879; color:white; text-align:center;">
  <h5 style="color:#ffc957; font-weight:600; font-size:14px; letter-spacing:1px;">AI RESUME BUILDER</h5>
  <h1 style="font-size:28px; font-weight:700; margin:10px 0;">
    Get Hired 2x Faster<br>
    with an <span style="color:#ffc957;">Optimized Resume</span>
  </h1>
  <p style="max-width:420px; margin:10px auto 20px;">
    Improve your resume with AI suggestions<br>and a recruiter-friendly format.
  </p>
  <a href="#resume-analyzer" class="primary-btn"
     style="background:#ffc957; color:#104879; padding:12px 24px; border-radius:6px; text-decoration:none; font-weight:600;">
    ANALYZE MY RESUME
  </a>
  <div style="margin:20px 0;">
    <img src="{{ url_for('static', filename='images/mobile-illustration.png') }}"
         alt="Upload Resume" style="max-width:180px;"/>
  </div>
</div>

<!-- Resume Analyzer -->
<section id="resume-analyzer" style="padding:40px 20px; background:#f9fafb;">
  <h2 style="color:#104879; font-size:24px; margin-bottom:10px;">üîç AI Resume Analyzer</h2>
  <p style="color:#555; margin-bottom:20px;">
    Paste or upload your resume to get a personalised score, keyword analysis, and suggestions.
  </p>

  <textarea id="resume-text" placeholder="Paste your resume here‚Ä¶"
    style="width:100%; height:150px; padding:12px; border:1px solid #ccc; border-radius:8px; margin-bottom:10px; font-size:14px;"></textarea>

  <input type="file" id="resumeFile" accept=".pdf,.txt,.docx"
    style="display:block; margin-bottom:15px;"/>

  <button id="analyze-btn" class="primary-btn"
    style="background:#104879; color:white; padding:12px 24px; border:none; border-radius:6px; font-weight:600;">
    Analyze Resume
  </button>

  <div id="analyzingIndicator" style="display:none; margin-top:1rem; color:#555;">
    ü§ñ Analyzing your resume, please wait‚Ä¶
  </div>
</section>

<!-- AI Resume Builder -->
<section id="resume-builder" style="background:#ffc957; padding:20px; border-radius:8px; margin-top:40px;">
  <h2 style="color:#104879;">üìÑ Build Your Resume with AI</h2>
  <p style="color:#333; margin-bottom:20px;">
    Quickly generate a professional resume with the power of AI. Fill in your details and let us handle formatting.
  </p>

  <form id="resumeForm" action="javascript:void(0);" style="display:grid; gap:12px;">
    <label>
      Full Name
      <input type="text" name="fullName" required style="width:100%; padding:8px;"/>
    </label>
    <label>
      Job Title(s)
      <input type="text" name="title" required style="width:100%; padding:8px;" placeholder="e.g. IT Support | Project Manager"/>
    </label>
    <label>
      Contact Info
      <input type="text" name="contact" required style="width:100%; padding:8px;" placeholder="City | Phone | Email"/>
    </label>
    <label>
      Professional Summary
      <textarea name="summary" style="width:100%; padding:8px;"></textarea>
    </label>
    <label>
      Education
      <textarea name="education" style="width:100%; padding:8px;"></textarea>
    </label>
    <label>
      Work Experience
      <textarea name="experience" style="width:100%; padding:8px;"></textarea>
    </label>
    <label>
      Skills
      <textarea name="skills" style="width:100%; padding:8px;"></textarea>
    </label>
    <label>
      Certifications
      <textarea name="certifications" style="width:100%; padding:8px;"></textarea>
    </label>
    <label>
      Portfolio / LinkedIn
      <input type="url" name="portfolio" style="width:100%; padding:8px;" placeholder="https://"/>
    </label>

    <button type="submit" class="primary-btn"
      style="background:#104879; color:white; padding:10px 20px; border:none; border-radius:6px; font-weight:600;">
      ‚ú® Generate Resume
    </button>
  </form>

  <!-- White box for spinner + AI HTML -->
  <div id="builderResumeOutput"
       class="resume-container"
       style="background:white; padding:20px; border-radius:6px; margin-top:30px;">
    <div id="builderGeneratingIndicator" style="display:none; color:#555; margin-bottom:1rem;">
      ü§ñ Generating your resume, please wait‚Ä¶
    </div>
    <!-- AI‚Äêreturned HTML will be injected here -->
  </div>

  <!-- Download / Sign-up CTA -->
  <div id="resumeDownloadOptions" style="display:none; text-align:center; margin-top:1rem;">
    {% if current_user.is_authenticated %}
      <button onclick="downloadResume('pdf')">‚¨áÔ∏è Download PDF</button>
      <button onclick="downloadResume('txt')">‚¨áÔ∏è Download TXT</button>
    {% else %}
      <p>
        Want to download your AI-generated resume?
        <strong><a href="/account" style="color:#104879; text-decoration:none;">Sign up or log in</a></strong> first.
      </p>
    {% endif %}
  </div>
</section>

{% endblock %}

{% block scripts %}
  <!-- 3rd-party libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/8.0.1/docx.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Your resume-builder logic -->
  <script src="{{ url_for('static', filename='resume-builder.js') }}"></script>
{% endblock %}
