{% extends "base.html" %}
{% block title %}Resume Builder – Jobcus{% endblock %}

{% block content %}
<main id="resume-builder" class="res-page">
  <!-- Hero -->
  <div class="interview-container" style="padding:20px 10px;width:100%;background:#104879;">
    <section class="interview-hero-with-image" style="display:flex;flex-direction:column;align-items:center;text-align:center;">
      <h5 style="color:#ffc957;font-weight:600;font-size:14px;letter-spacing:1px;">AI RESUME BUILDER</h5>
      <h1 style="font-size:28px;font-weight:700;color:#fff;margin:10px 0;">Build a polished, ATS-friendly resume</h1>
      <p style="max-width:420px;color:#fff;font-size:16px;margin:10px 0 20px;">Use our modern or minimal template to build your resume.</p>
    </section>
  </div>

  <!-- Tabs -->
  <nav class="rb-tabs" role="tablist" aria-label="Resume builder steps">
    <button class="active" data-target="#write"  role="tab" aria-controls="write"  aria-selected="true">Write</button>
    <button data-target="#design" role="tab" aria-controls="design" aria-selected="false">Design</button>
    <button data-target="#improve" role="tab" aria-controls="improve" aria-selected="false">Improve</button>
  </nav>

  <!-- Form -->
  <form id="resumeForm" class="rb-form" autocomplete="on">
    <!-- WRITE -->
    <section id="write" class="rb-step" role="tabpanel">
      <!-- Personal -->
      <article class="rb-card">
        <header>
          <h2>Personal details</h2>
          <p>Give recruiters a quick overview.</p>
        </header>

        <div class="rb-grid">
          <label>First name
            <input type="text" name="firstName" placeholder="John" required>
          </label>
          <label>Last name
            <input type="text" name="lastName" placeholder="Smith">
          </label>
          <label class="full">Job title
            <input type="text" name="title" placeholder="e.g., Product Designer">
          </label>
        </div>

        <details class="rb-disclosure">
          <summary>Show additional details</summary>
          <div class="rb-grid">
            <label>Nationality <input type="text" name="nationality" placeholder="USA"></label>
            <label>Driver’s licence <input type="text" name="drivers" placeholder="B"></label>
            <label>Birth date <input type="date" name="dob"></label>
          </div>
        </details>
      </article>

      <!-- Contact -->
      <article class="rb-card">
        <header>
          <h2>Contact information</h2>
          <p>Make it easy to reach you.</p>
        </header>

        <div class="rb-grid">
          <label class="full">Email <input type="email" name="email" placeholder="john@example.com"></label>
          <label class="full">Phone <input type="tel" name="phone" placeholder="999 888 7777"></label>
          <label>Country <input type="text" name="country" placeholder="USA"></label>
          <label>City <input type="text" name="city" placeholder="Austin"></label>
          <label class="full">Address <input type="text" name="address" placeholder="500 W 2nd St"></label>
          <label>Postcode <input type="text" name="postcode" placeholder="55912"></label>
          <label class="full">LinkedIn / Portfolio <input type="url" name="portfolio" placeholder="https://linkedin.com/in/john"></label>
        </div>
      </article>

      <!-- Summary -->
      <article class="rb-card">
        <header>
          <h2>Professional summary</h2>
          <p>Include your title, years of experience and 1–2 measurable wins.</p>
        </header>

        <textarea name="summary" rows="5" placeholder="Product Designer with 10 years of experience..."></textarea>

        <!-- AI helper -->
        <div class="ai-suggest">
          <div class="ai-title">✦ Write with AI</div>
          <p class="ai-text">
            Product designer who improves onboarding flows and boosts activation; recently cut time-to-value by 28%.
          </p>
          <div class="ai-actions">
            <button type="button" class="btn ai-skip">Skip</button>
            <button type="button" class="btn btn-primary ai-add">Add</button>
          </div>
        </div>
      </article>

      <!-- Experience -->
      <article class="rb-card" data-repeater="experience">
        <header>
          <h2>Employment history</h2>
          <p>Use action verbs, quantify results, and keep it concise.</p>
        </header>

        <template id="tpl-experience">
          <div class="rb-item">
            <div class="rb-grid">
              <label class="full">Job title <input type="text" name="role" placeholder="Product Designer"></label>
              <label class="full">Company name <input type="text" name="company" placeholder="Apple Inc."></label>
              <label>Start date <input type="text" name="start" placeholder="Jan 2016"></label>
              <label>End date <input type="text" name="end" placeholder="Feb 2019 / Present"></label>
              <label class="full">Location <input type="text" name="location" placeholder="Washington, D.C."></label>
            </div>

            <label class="full">Highlights (one per line)
              <textarea name="bullets" rows="4" placeholder="• Designed user-friendly interfaces...&#10;• Worked with teams to improve product features..."></textarea>
            </label>

            <!-- AI helper -->
            <div class="ai-suggest">
              <div class="ai-title">✦ Write with AI</div>
              <p class="ai-text">
                Fostered a collaborative team environment, enhancing communication and ensuring all voices were heard during delivery.
              </p>
              <div class="ai-actions">
                <button type="button" class="btn ai-skip">Skip</button>
                <button type="button" class="btn btn-primary ai-add">Add</button>
              </div>
            </div>

            <div class="rb-actions"><button type="button" class="rb-remove">Remove</button></div>
          </div>
        </template>

        <div class="rb-list" id="exp-list"></div>
        <button type="button" class="rb-add" data-add="experience">+ Add another experience</button>
      </article>

      <!-- Skills -->
      <article class="rb-card">
        <header>
          <h2>Skills</h2>
          <p>Highlight your most relevant professional skills.</p>
        </header>
        <div class="rb-chip-input">
          <input type="text" id="skillInput" placeholder="Type a skill and press Enter">
          <div id="skillChips" class="rb-chips"></div>
          <input type="hidden" name="skills">
        </div>
      </article>

      <!-- Education -->
      <article class="rb-card" data-repeater="education">
        <header>
          <h2>Education</h2>
          <p>Add your school, degree, dates and location.</p>
        </header>

        <template id="tpl-education">
          <div class="rb-item">
            <div class="rb-grid">
              <label class="full">Institution <input type="text" name="school" placeholder="Harvard University"></label>
              <label class="full">Degree <input type="text" name="degree" placeholder="Bachelor's Degree in Design"></label>
              <label>Start date <input type="text" name="graduatedStart" placeholder="Jan 2016"></label>
              <label>End date <input type="text" name="graduated" placeholder="Feb 2019"></label>
              <label class="full">Location <input type="text" name="location" placeholder="Cambridge, MA"></label>
            </div>
            <div class="rb-actions"><button type="button" class="rb-remove">Remove</button></div>
          </div>
        </template>

        <div class="rb-list" id="edu-list"></div>
        <button type="button" class="rb-add" data-add="education">+ Add education</button>
      </article>
    </section>

    <!-- DESIGN -->
    <section id="design" class="rb-step" role="tabpanel" hidden>
      <article class="rb-card">
        <header><h2>Design</h2><p>Pick a template.</p></header>

        <label>Theme
          <select id="themeSelect" name="theme">
            <option value="modern" selected>Modern</option>
            <option value="minimal">Minimal</option>
          </select>
        </label>

        <div class="rb-row">
          <button type="button" id="previewTemplate" class="cta-secondary">Preview</button>
          <button type="button" id="downloadTemplatePdf" class="cta-primary">Download PDF</button>
        </div>

        <div id="resumePreviewWrap" style="display:none;margin-top:1rem;">
          <h3>Preview</h3>
          <iframe id="resumePreview" class="resume-preview" style="width:100%;height:100vh;border:0;background:#fff;"></iframe>
        </div>
      </article>
    </section>

    <!-- IMPROVE -->
    <section id="improve" class="rb-step" role="tabpanel" hidden>
      <article class="rb-card">
        <header><h2>Improve</h2><p>Use AI to tighten bullets, tone and length. (Coming soon)</p></header>
      </article>
    </section>

    <!-- Sticky footer controls -->
    <footer class="rb-footer">
      <button type="button" id="rb-back" class="ghost">Back</button>
      <button type="button" id="rb-next" class="cta-secondary">Next</button>
    </footer>
  </form>
</main>
{% endblock %}

{% block scripts %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script src="{{ url_for('static', filename='js/resume-builder.js') }}"></script>
{% endblock %}
