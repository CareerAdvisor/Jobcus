<!-- resume-builder.html -->
{% extends "base.html" %}

{% block title %}Resume Builder ‚Äì Jobcus{% endblock %}

{% block content %}

<!-- Hero Section -->
<div class="interview-container" style="padding: 30px 10px; background: #fff;">
  <section class="interview-hero-with-image" style="display: flex; flex-direction: column; align-items: center; text-align: center;">
    <h5 style="color: #6B7280; font-weight: 600; font-size: 14px; letter-spacing: 1px;">AI RESUME BUILDER</h5>
    
    <h1 style="font-size: 28px; font-weight: 700; color: #000; margin: 10px 0;">
      Get Hired 2x Faster <br>with an <span style="color: #ee9e12;">Optimized Resume</span>
    </h1>

    <p style="max-width: 400px; color: #333; font-size: 16px; margin: 10px 0 20px;">
      Improve your resume with AI suggestions<br>and a recruiter-friendly format.
    </p>

    <ul style="list-style: none; padding: 0; margin-bottom: 15px; color: #000;">
      <li style="margin-bottom: 8px;">‚úÖ ATS Resume Templates</li>
      <li style="margin-bottom: 8px;">‚úÖ Resume Score</li>
      <li>‚úÖ One Click Optimizer</li>
    </ul>

    <a href="#start-builder" class="primary-btn" style="background-color: #104879; padding: 12px 24px; color: white; border-radius: 6px; text-decoration: none; font-weight: 600;">
      ANALYZE MY RESUME
    </a>

    <div style="margin-top: 20px;">
      <img src="{{ url_for('static', filename='images/mobile-illustration.png') }}" alt="Upload Resume" style="max-width: 180px; height: auto;" />
    </div>
  </section>
</div>

<!-- Step-by-Step Guide -->
<section class="resume-steps" style="text-align: center; background: #fff; padding: 30px 20px;">
  <img 
    src="{{ url_for('static', filename='images/how-it-works-guide.png') }}" 
    alt="How It Works Guide" 
    style="max-width: 100%; height: auto; box-shadow: 0 8px 24px rgba(0,0,0,0.1); border-radius: 10px;"/>
</section>

<!-- Resume Health & ATS Analyzer -->
<section id="ats-analyzer" class="resume-analyzer" style="padding: 40px 20px;">
  <h2 style="color: #104879;">AI Resume Analyzer</h2> </br>
  <p>Paste your resume or upload your file to get a detailed analysis of keyword match, readability, and formatting tips.</p></br>

  <label for="resume-text" style="font-weight: bold;">Paste Your Resume</label>
  <textarea id="resume-text" rows="6" placeholder="Paste your resume here..." style="width: 100%; padding: 10px; margin-bottom: 20px;"></textarea>

  <label for="resume-upload" style="font-weight: bold;">or Upload Resume File (PDF, DOCX, TXT)</label>
  <input type="file" id="resume-upload" accept=".pdf,.doc,.docx,.txt" style="display: block; margin: 10px 0 20px;" />

  <button id="analyze-btn" style="background-color: #104879; color: #fff; padding: 10px 20px; border: none; border-radius: 5px;">üîç Analyze Resume</button>

  <div id="analyzer-result" style="margin-top: 20px;"></div>
</section>

<!-- Resume Builder Form -->
<section id="start-builder" class="resume-builder-container" style="padding: 40px 20px; max-width: 800px; margin: 0 auto;">
  <h1 style="color: #104879;">üìÑ Build Your Resume with AI</h1>
  <p class="subheading">Fill out the form below to generate a professional resume tailored to your career goals.</p>

  <form id="resumeForm" style="display: flex; flex-direction: column; gap: 16px;">
    <label>Full Name</label>
    <input type="text" name="fullName" required>

    <label>Email Address</label>
    <input type="email" name="email" required>

    <label>Phone Number</label>
    <input type="tel" name="phone" required>

    <label>Professional Summary</label>
    <textarea name="summary" rows="3"></textarea>

    <label>Education</label>
    <textarea name="education" placeholder="e.g., BSc in Computer Science, University of Lagos (2018‚Äì2022)"></textarea>

    <label>Work Experience</label>
    <textarea name="experience" placeholder="List your roles and achievements..."></textarea>

    <label>Skills</label>
    <textarea name="skills" placeholder="e.g., Python, Project Management"></textarea>

    <label>Certifications</label>
    <textarea name="certifications" placeholder="e.g., CompTIA A+, PMP, AWS Certified"></textarea>

    <label>Languages</label>
    <input type="text" name="languages" placeholder="e.g., English, French">

    <label>LinkedIn / Portfolio URL</label>
    <input type="url" name="portfolio">

    <button type="submit" class="generate-btn">‚ú® Generate Resume</button>
  </form>

  <section id="resumePreview" style="display: none; margin-top: 40px;">
    <h2>üßæ Your AI-Generated Resume</h2>
    <div id="resumeOutput" class="resume-preview-box"></div>
    <button id="downloadResumeBtn">‚¨áÔ∏è Download as PDF</button>
  </section>
</section>

{% endblock %}

{% block scripts %}
<script>
document.getElementById('resumeForm').addEventListener('submit', async function (e) {
  e.preventDefault();

  const form = e.target;
  const data = {
    fullName: form.fullName.value,
    email: form.email.value,
    phone: form.phone.value,
    summary: form.summary.value,
    education: form.education.value,
    experience: form.experience.value,
    skills: form.skills.value,
    certifications: form.certifications.value,
    languages: form.languages.value,
    portfolio: form.portfolio.value
  };

  const preview = document.getElementById('resumePreview');
  const output = document.getElementById('resumeOutput');
  preview.style.display = 'block';
  output.innerHTML = `<div class="spinner"></div><p>Generating your resume...</p>`;

  try {
    const res = await fetch('/generate-resume', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    const result = await res.json();

    if (result.formatted_resume) {
      output.innerHTML = result.formatted_resume;
    } else {
      output.innerHTML = '<p style="color:red;">‚ùå Failed to generate resume. Please try again.</p>';
    }
  } catch (err) {
    console.error(err);
    output.innerHTML = '<p style="color:red;">‚ùå Server error. Please try again later.</p>';
  }
});
</script>
{% endblock %}
