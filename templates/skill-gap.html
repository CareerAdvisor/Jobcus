<!-- skill-gap.html -->
{% extends "base.html" %}

{% block title %}Skill Gap Analysis â€“ Jobcus{% endblock %}

{% block content %}
<section class="skillgap-hero">
  <h1>ğŸ§  Skill Gap Analysis</h1>
  <p>Find out what skills youâ€™re missing for your desired role â€” and how to acquire them.</p>
</section>

<section class="skillgap-form">
  <form id="skillGapForm">
    <label for="career-goal">ğŸ¯ Career Goal</label>
    <input type="text" id="career-goal" name="career_goal" placeholder="e.g. Data Analyst" required>

    <label for="current-skills">ğŸ›  Current Skills</label>
    <input type="text" id="current-skills" name="current_skills" placeholder="e.g. Excel, SQL, Reporting" required>

    <button type="submit" class="analyze-btn">Analyze Skill Gap</button>
  </form>
</section>

<section class="skillgap-results" id="results" style="display:none">
  <h2>ğŸ” Results</h2>
  <div id="missing-skills"></div>
  <div id="suggested-resources"></div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.getElementById("skillGapForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const goal = document.getElementById("career-goal").value;
  const skills = document.getElementById("current-skills").value.split(",").map(s => s.trim());

  const res = await fetch("/api/skill-gap", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ career_goal: goal, current_skills: skills })
  });

  const data = await res.json();
  document.getElementById("results").style.display = "block";
  document.getElementById("missing-skills").innerHTML = `<h3>Missing Skills</h3><ul>${data.missing_skills.map(skill => `<li>${skill}</li>`).join("")}</ul>`;
  document.getElementById("suggested-resources").innerHTML = `<h3>Suggested Resources</h3><ul>${data.suggestions.map(s => `<li><a href='${s.resource}' target='_blank'>${s.skill}</a></li>`).join("")}</ul>`;
});
</script>
{% endblock %}
