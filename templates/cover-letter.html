{# templates/cover-letter.html #}
{% extends "base.html" %}
{% block title %}Cover Letter – Jobcus{% endblock %}

{% block content %}
<main id="cover-letter" class="rb-wrap">
  <!-- Hero -->
  <div class="interview-container" style="padding:20px 16px;width:100%;background:#104879;">
    <section class="interview-hero-with-image" style="display:flex;flex-direction:column;align-items:center;text-align:center;">
      <h5 style="color:#ffc957;font-weight:600;font-size:14px;letter-spacing:1px;">AI COVER LETTER</h5>
      <h1 style="font-size:28px;font-weight:700;color:#fff;margin:10px 0;">Create a tailored cover letter</h1>
      <p style="max-width:520px;color:#fff;font-size:16px;margin:10px 0 20px;">Use your resume details to draft a polished letter.</p>
    </section>
  </div>

  <div class="rb-container">
    <form id="clForm" class="rb-form" autocomplete="on">

      <!-- Section 1 -->
      <div class="rb-section">
        <section class="rb-step active">
          <article class="rb-card">
            <header>
              <h2>Letter details</h2>
              <p>Who’s this for and what role?</p>
            </header>
            <div class="rb-panel">
              <div class="rb-grid">
                <label class="full">Recipient (Name or Team)
                  <input type="text" name="recipient" placeholder="Hiring Manager">
                </label>
                <label>Company
                  <input type="text" name="company" placeholder="Acme Inc.">
                </label>
                <label>Role
                  <input type="text" name="role" placeholder="Product Designer">
                </label>
                <label class="full">Job link (optional)
                  <input type="url" name="jobUrl" placeholder="https://…">
                </label>
                <label class="full">Tone
                  <select name="tone">
                    <option value="professional" selected>Professional</option>
                    <option value="friendly">Friendly</option>
                    <option value="concise">Concise</option>
                  </select>
                </label>
              </div>
            </div>
          </article>
        </section>
      </div>

      <!-- Section 2 -->
      <div class="rb-section">
        <section class="rb-step">
          <article class="rb-card">
            <header>
              <h2>Your info</h2>
              <p>We’ll prefill from the builder/analyzer when possible.</p>
            </header>
            <div class="rb-panel">
              <div class="rb-grid">
                <label>First name <input type="text" name="firstName" placeholder="John"></label>
                <label>Last name  <input type="text" name="lastName"  placeholder="Doe"></label>
                <label class="full">Contact line
                  <input type="text" name="contact" placeholder="London, UK | john@email.com | 07123 456 789 | linkedin.com/in/john">
                </label>
              </div>
            </div>
          </article>
        </section>
      </div>

      <!-- Section 3 -->
      <div class="rb-section">
        <section class="rb-step">
          <article class="rb-card">
            <header>
              <h2>Draft</h2>
              <p>Let AI help or write your own.</p>
            </header>
            <div class="rb-panel">
              <textarea name="body" rows="12" placeholder="Dear Hiring Manager, …"></textarea>

              <div class="ai-suggest" id="ai-cl" data-field="cover_letter">
                <div class="ai-title">✦ Write with AI</div>
                <p class="ai-text">We’ll draft a tailored letter using your details above.</p>
                <div class="ai-actions">
                  <button type="button" class="btn ai-refresh" data-ai="cover_letter">Refresh</button>
                  <button type="button" class="btn btn-primary ai-add">Insert</button>
                </div>
              </div>
            </div>
          </article>
        </section>
      </div>

      <!-- Footer like builder -->
      <footer class="rb-footer">
        <a class="ghost" href="/resume-builder">← Back to Builder</a>
        <div style="display:flex;gap:.5rem;">
          <button type="button" id="cl-preview" class="cta-secondary">Preview</button>
          <button type="button" id="cl-download" class="cta-primary">Download PDF</button>
        </div>
      </footer>

      <div id="clPreviewWrap" style="display:none;margin-top:1rem;">
        <iframe id="clPreview" style="width:100%;height:80vh;border:0;background:#fff;"></iframe>
      </div>
    </form>
  </div>
</main>
{% endblock %}

{% block scripts %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/resume-builder.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/cover-letter.css') }}">
<script defer src="{{ url_for('static', filename='js/cover-letter.js') }}"></script>
{% endblock %}
