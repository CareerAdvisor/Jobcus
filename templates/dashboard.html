{% extends "base.html" %}

{% block title %}My Dashboard ‚Äì Jobcus{% endblock %}
{% block body_class %}dashboard-page{% endblock %}

{% block content %}
<section class="dashboard-container">
  <!-- Greeting placeholder; JS will fill this from data-user-name -->
  <h1 id="dashboardGreeting"
      data-user-name="{{ current_user.fullname or current_user.email }}"
      class="dashboard-title">
    <!-- injected by JS -->
  </h1>
  <p class="dashboard-subtitle">
    Track your career growth and insights powered by Jobcus AI
  </p>

  <div class="dashboard-cards">

    <!-- Resume Score Card -->
    <div class="dashboard-card">
      <h3>üìÑ Resume Score</h3>
      <div class="progress-circle" data-score="0">
        <svg viewBox="0 0 36 36">
          <path class="bg"
                d="M18 2.0845
                   a 15.9155 15.9155 0 0 1 0 31.831
                   a 15.9155 15.9155 0 0 1 0 -31.831"/>
          <path class="progress" stroke-dasharray="0, 100"
                d="M18 2.0845
                   a 15.9155 15.9155 0 0 1 0 31.831
                   a 15.9155 15.9155 0 0 1 0 -31.831"/>
          <text x="18" y="20.35" class="percentage">0%</text>
        </svg>
        <p class="metric-note">Last analyzed: just now</p>
      </div>
    </div>

    <!-- Dashboard Upload Form -->
    <form id="resumeUploadForm" class="resume-upload">
      <input type="file" id="resumeFile" accept=".pdf,.txt" />
      <button type="submit" class="cta-primary">Upload Resume</button>
    </form>

    <!-- Analysis Insights -->
    <section class="resume-analysis">
      <h2>Steps to Improve Your Resume</h2>
      <p>Based on ATS analysis, here are the key points:</p>

      <div class="analysis-issues">
        <h3>‚ö†Ô∏è Issues Found</h3>
        <ul id="top-issues"></ul>
      </div>

      <div class="analysis-strengths">
        <h3>‚úÖ What You Did Well</h3>
        <ul id="good-points"></ul>
      </div>
    </section>

    <!-- Skill Gap -->
    <div class="dashboard-card">
      <h3>üß∞ Skill Gap Progress</h3>
      <div class="progress-bar">
        <div class="progress-fill" style="width: 0%;"></div>
      </div>
      <p class="metric-note">0% skill match for your target role</p>
      <a href="/skill-gap" class="dashboard-link">Improve Skills</a>
    </div>

    <!-- Interview Readiness -->
    <div class="dashboard-card">
      <h3>üß† Interview Readiness</h3>
      <div class="progress-bar">
        <div class="progress-fill" style="width: 0%;"></div>
      </div>
      <p class="metric-note">0% practiced scenarios</p>
      <a href="/interview-coach" class="dashboard-link">Practice Now</a>
    </div>

  </div>
</section>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
{% endblock %}
