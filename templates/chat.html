<!-- templates/chat.html -->
{% extends "base.html" %}

{% block title %}Chat with Jobcus{% endblock %}
{% block body_class %}chat-page{% endblock %}

{% block header_icon %}
  <img src="{{ url_for('static', filename='icons/pencilchat.svg') }}"
       class="header-pencil-icon"
       alt="New Chat" title="Start a new chat"
       onclick="clearChat()" />
{% endblock %}

{% set show_footer = false %}

{% block content %}
<main id="mainContainer">
  <div class="chat-wrapper">
    <div class="chatbox" id="chatbox">
      <!-- Welcome banner + suggestions -->
      <div id="welcomeBanner" class="welcome-banner">
        <p>ðŸ‘‹ Welcome{{ current_user.first_name ? ' ' + current_user.first_name : '' }}! How can I help you today?</p>
        <div class="suggestion-chips">
          <button type="button" onclick="insertSuggestion('How do I improve my resume?')">
            Improve my resume
          </button>
          <button type="button" onclick="insertSuggestion('Interview tips for a UX role')">
            Interview tips
          </button>
          <button type="button" onclick="insertSuggestion('Show me job market insights for London')">
            Job insights
          </button>
        </div>
      </div>
    </div>
    <div id="job-results" class="job-results"></div>
  </div>

  <form id="chat-form">
    <div class="input-container" id="inputContainer">
      <textarea id="userInput"
                rows="1"
                placeholder="Ask your career question..."
                oninput="autoResize(this)"
      ></textarea>
      <div class="icon-group" style="align-items: right;">
        <label for="file-upload">
          <img src="{{ url_for('static', filename='icons/attach.svg') }}" alt="Attach">
        </label>
        <input id="file-upload" type="file" style="display: none;" onchange="handleAttach()">
        <img src="{{ url_for('static', filename='icons/mic.svg') }}"
             alt="Mic"
             onclick="handleMic()">
        <img id="sendButton"
             src="{{ url_for('static', filename='icons/send.svg') }}"
             alt="Send">
      </div>
    </div>
  </form>

  <img id="scrollDown"
       class="scroll-down-icon"
       src="{{ url_for('static', filename='icons/scrolldown.svg') }}"
       alt="Scroll Down"
       onclick="scrollToBottom()">
</main>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
{% endblock %}
